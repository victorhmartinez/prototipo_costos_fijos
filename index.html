<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simulador de Costos Fijos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gradient-to-br from-gray-100 to-gray-300 min-h-screen p-4">
  <div class="max-w-4xl mx-auto">
    <!-- Encabezado -->
    <header class="text-center py-8">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">Simulador de Costos Fijos</h1>
      <p class="text-gray-600 max-w-2xl mx-auto">Calcula y analiza los costos de tu negocio para tomar decisiones informadas</p>
    </header>

    <!-- Contenedor principal -->
    <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
      
      <!-- Sección: Datos del negocio -->
      <section class="p-6 bg-blue-50 border-l-4 border-blue-500">
        <h2 class="text-xl font-bold text-blue-800 flex items-center mb-4">
          <i class="fas fa-building mr-2 text-2xl"></i> Información del negocio
        </h2>
        <div id="datos-negocio-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div class="dato-negocio-item flex gap-2">
            <input type="text" placeholder="Nombre del dato" class="input-style bg-blue-50 border-blue-200 focus:ring-blue-500 focus:border-blue-500 flex-1" />
            <input type="text" placeholder="Valor" class="input-style bg-blue-50 border-blue-200 focus:ring-blue-500 focus:border-blue-500 flex-1" />
          </div>
        </div>
        <button id="agregar-dato-negocio" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg flex items-center transition">
          <i class="fas fa-plus mr-2"></i> Agregar dato
        </button>
      </section>

      <!-- Sección: Costos fijos -->
      <section class="p-6 bg-red-50 border-l-4 border-red-500">
        <h2 class="text-xl font-bold text-red-700 flex items-center mb-4">
          <i class="fas fa-money-bill-wave mr-2 text-2xl"></i> Costos fijos principales
        </h2>
        <div id="costos-fijos-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div class="costo-fijo-item flex gap-2">
            <input type="text" placeholder="Nombre del costo" class="input-style bg-red-50 border-red-200 focus:ring-red-500 focus:border-red-500 flex-1" />
            <input type="number" placeholder="Monto ($)" class="input-style bg-red-50 border-red-200 focus:ring-red-500 focus:border-red-500 w-32" />
          </div>
        </div>
        <button id="agregar-costo-fijo" class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg flex items-center transition">
          <i class="fas fa-plus mr-2"></i> Agregar costo fijo
        </button>
      </section>

      <!-- Sección: Costos adicionales -->
      <section class="p-6 bg-teal-50 border-l-4 border-teal-500">
        <h2 class="text-xl font-bold text-teal-700 flex items-center mb-4">
          <i class="fas fa-tools mr-2 text-2xl"></i> Costos adicionales
        </h2>
        <div id="costos-adicionales-container" class="space-y-4 mb-4">
          <div class="costo-adicional-item flex gap-2">
            <input type="text" placeholder="Nombre del costo adicional" class="input-style bg-teal-50 border-teal-200 focus:ring-teal-500 focus:border-teal-500 flex-1" />
            <input type="number" placeholder="Monto ($)" class="input-style bg-teal-50 border-teal-200 focus:ring-teal-500 focus:border-teal-500 w-32" />
          </div>
        </div>
        <button id="agregar-costo-adicional" class="bg-teal-600 hover:bg-teal-700 text-white font-medium py-2 px-4 rounded-lg flex items-center transition">
          <i class="fas fa-plus mr-2"></i> Agregar costo adicional
        </button>
      </section>

      <!-- Sección: Variabilidad -->
      <section class="p-6 bg-orange-50 border-l-4 border-orange-500">
        <h2 class="text-xl font-bold text-orange-600 flex items-center mb-4">
          <i class="fas fa-exclamation-triangle mr-2 text-2xl"></i> Variabilidad y control
        </h2>
        <div id="variabilidad-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div class="variabilidad-item flex gap-2">
            <input type="text" placeholder="Nombre de la variabilidad" class="input-style bg-orange-50 border-orange-200 focus:ring-orange-500 focus:border-orange-500 flex-1" />
            <input type="text" placeholder="Valor" class="input-style bg-orange-50 border-orange-200 focus:ring-orange-500 focus:border-orange-500 flex-1" />
          </div>
        </div>
        <button id="agregar-variabilidad" class="bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-lg flex items-center transition">
          <i class="fas fa-plus mr-2"></i> Agregar variabilidad
        </button>
      </section>

      <!-- Sección: Ingresos -->
      <section class="p-6 bg-gray-50 border-l-4 border-gray-500">
        <h2 class="text-xl font-bold text-gray-800 flex items-center mb-4">
          <i class="fas fa-chart-line mr-2 text-2xl"></i> Ingresos y proyecciones
        </h2>
        <div id="ingresos-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div class="ingreso-item flex gap-2">
            <input type="text" placeholder="Nombre del ingreso" class="input-style bg-gray-50 border-gray-200 focus:ring-gray-500 focus:border-gray-500 flex-1" />
            <input type="number" placeholder="Monto ($)" class="input-style bg-gray-50 border-gray-200 focus:ring-gray-500 focus:border-gray-500 w-32" />
          </div>
        </div>
        <button id="agregar-ingreso" class="bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg flex items-center transition">
          <i class="fas fa-plus mr-2"></i> Agregar ingreso
        </button>
      </section>

      <!-- Sección: Retroalimentación / Resultados (oculta inicialmente) -->
      <section id="resultados" class="p-6 bg-purple-50 border-l-4 border-purple-500 hidden transition-all duration-500 ease-in-out">
        <h2 class="text-xl font-bold text-purple-800 flex items-center mb-4">
          <i class="fas fa-chart-pie mr-2 text-2xl"></i> Análisis y Resultados
        </h2>
        <div class="bg-white border-2 border-dashed border-purple-300 rounded-xl p-4 min-h-[120px] shadow-inner">
          <div id="contenido-resultados" class="text-gray-700">
            <!-- Los resultados se insertarán aquí mediante JavaScript -->
          </div>
        </div>
      </section>

      <!-- Botón -->
      <div class="text-center p-6 bg-gradient-to-r from-green-500 to-emerald-600">
        <button id="calcular-btn" class="bg-gradient-to-r from-green-600 to-emerald-700 text-white font-bold text-lg px-8 py-3 rounded-full shadow-lg hover:from-green-700 hover:to-emerald-800 transition transform hover:scale-105 duration-300 ease-in-out">
          <i class="fas fa-calculator mr-2"></i> Calcular y Simular
        </button>
      </div>
    </div>

    <!-- Pie de página -->
    <footer class="text-center py-6 text-gray-600">
      <p>© 2023 Simulador de Costos Fijos - Todos los derechos reservados</p>
    </footer>
  </div>

  <style>
    .input-style {
      @apply border-2 rounded-xl px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-opacity-50 transition duration-200 ease-in-out;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }
    .input-style:focus {
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .dato-negocio-item, .costo-fijo-item, .costo-adicional-item, .variabilidad-item, .ingreso-item {
      animation: fadeIn 0.3s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>

  <script>
    // Funcionalidad para agregar datos del negocio
    document.getElementById('agregar-dato-negocio').addEventListener('click', function() {
      const container = document.getElementById('datos-negocio-container');
      const newItem = document.createElement('div');
      newItem.className = 'dato-negocio-item flex gap-2 animate-fadeIn';
      newItem.innerHTML = `
        <input type="text" placeholder="Nombre del dato" class="input-style bg-blue-50 border-blue-200 focus:ring-blue-500 focus:border-blue-500 flex-1" />
        <input type="text" placeholder="Valor" class="input-style bg-blue-50 border-blue-200 focus:ring-blue-500 focus:border-blue-500 flex-1" />
        <button class="eliminar-dato-negocio bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-lg px-3 transition">
          <i class="fas fa-times"></i>
        </button>
      `;
      container.appendChild(newItem);
      
      // Agregar evento para eliminar el item
      newItem.querySelector('.eliminar-dato-negocio').addEventListener('click', function() {
        newItem.remove();
      });
    });

    // Funcionalidad para agregar costos fijos
    document.getElementById('agregar-costo-fijo').addEventListener('click', function() {
      const container = document.getElementById('costos-fijos-container');
      const newItem = document.createElement('div');
      newItem.className = 'costo-fijo-item flex gap-2 animate-fadeIn';
      newItem.innerHTML = `
        <input type="text" placeholder="Nombre del costo" class="input-style bg-red-50 border-red-200 focus:ring-red-500 focus:border-red-500 flex-1" />
        <input type="number" placeholder="Monto ($)" class="input-style bg-red-50 border-red-200 focus:ring-red-500 focus:border-red-500 w-32" />
        <button class="eliminar-costo-fijo bg-red-100 hover:bg-red-200 text-red-600 rounded-lg px-3 transition">
          <i class="fas fa-times"></i>
        </button>
      `;
      container.appendChild(newItem);
      
      // Agregar evento para eliminar el item
      newItem.querySelector('.eliminar-costo-fijo').addEventListener('click', function() {
        newItem.remove();
      });
    });

    // Funcionalidad para agregar costos adicionales
    document.getElementById('agregar-costo-adicional').addEventListener('click', function() {
      const container = document.getElementById('costos-adicionales-container');
      const newItem = document.createElement('div');
      newItem.className = 'costo-adicional-item flex gap-2 animate-fadeIn';
      newItem.innerHTML = `
        <input type="text" placeholder="Nombre del costo adicional" class="input-style bg-teal-50 border-teal-200 focus:ring-teal-500 focus:border-teal-500 flex-1" />
        <input type="number" placeholder="Monto ($)" class="input-style bg-teal-50 border-teal-200 focus:ring-teal-500 focus:border-teal-500 w-32" />
        <button class="eliminar-costo-adicional bg-teal-100 hover:bg-teal-200 text-teal-600 rounded-lg px-3 transition">
          <i class="fas fa-times"></i>
        </button>
      `;
      container.appendChild(newItem);
      
      // Agregar evento para eliminar el item
      newItem.querySelector('.eliminar-costo-adicional').addEventListener('click', function() {
        newItem.remove();
      });
    });

    // Funcionalidad para agregar variabilidad
    document.getElementById('agregar-variabilidad').addEventListener('click', function() {
      const container = document.getElementById('variabilidad-container');
      const newItem = document.createElement('div');
      newItem.className = 'variabilidad-item flex gap-2 animate-fadeIn';
      newItem.innerHTML = `
        <input type="text" placeholder="Nombre de la variabilidad" class="input-style bg-orange-50 border-orange-200 focus:ring-orange-500 focus:border-orange-500 flex-1" />
        <input type="text" placeholder="Valor" class="input-style bg-orange-50 border-orange-200 focus:ring-orange-500 focus:border-orange-500 flex-1" />
        <button class="eliminar-variabilidad bg-orange-100 hover:bg-orange-200 text-orange-600 rounded-lg px-3 transition">
          <i class="fas fa-times"></i>
        </button>
      `;
      container.appendChild(newItem);
      
      // Agregar evento para eliminar el item
      newItem.querySelector('.eliminar-variabilidad').addEventListener('click', function() {
        newItem.remove();
      });
    });

    // Funcionalidad para agregar ingresos
    document.getElementById('agregar-ingreso').addEventListener('click', function() {
      const container = document.getElementById('ingresos-container');
      const newItem = document.createElement('div');
      newItem.className = 'ingreso-item flex gap-2 animate-fadeIn';
      newItem.innerHTML = `
        <input type="text" placeholder="Nombre del ingreso" class="input-style bg-gray-50 border-gray-200 focus:ring-gray-500 focus:border-gray-500 flex-1" />
        <input type="number" placeholder="Monto ($)" class="input-style bg-gray-50 border-gray-200 focus:ring-gray-500 focus:border-gray-500 w-32" />
        <button class="eliminar-ingreso bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-lg px-3 transition">
          <i class="fas fa-times"></i>
        </button>
      `;
      container.appendChild(newItem);
      
      // Agregar evento para eliminar el item
      newItem.querySelector('.eliminar-ingreso').addEventListener('click', function() {
        newItem.remove();
      });
    });

    // Delegación de eventos para los botones de eliminar existentes
    document.getElementById('datos-negocio-container').addEventListener('click', function(e) {
      if (e.target.closest('.eliminar-dato-negocio')) {
        e.target.closest('.dato-negocio-item').remove();
      }
    });

    document.getElementById('costos-fijos-container').addEventListener('click', function(e) {
      if (e.target.closest('.eliminar-costo-fijo')) {
        e.target.closest('.costo-fijo-item').remove();
      }
    });

    document.getElementById('costos-adicionales-container').addEventListener('click', function(e) {
      if (e.target.closest('.eliminar-costo-adicional')) {
        e.target.closest('.costo-adicional-item').remove();
      }
    });

    document.getElementById('variabilidad-container').addEventListener('click', function(e) {
      if (e.target.closest('.eliminar-variabilidad')) {
        e.target.closest('.variabilidad-item').remove();
      }
    });

    document.getElementById('ingresos-container').addEventListener('click', function(e) {
      if (e.target.closest('.eliminar-ingreso')) {
        e.target.closest('.ingreso-item').remove();
      }
    });

    document.getElementById('calcular-btn').addEventListener('click', function() {
      // Mostrar la sección de resultados
      const resultadosSection = document.getElementById('resultados');
      resultadosSection.classList.remove('hidden');
      
      // Obtener costos fijos dinámicos
      let costosFijos = 0;
      const costosFijosDetalle = [];
      const costosFijosItems = document.querySelectorAll('.costo-fijo-item');
      
      costosFijosItems.forEach(item => {
        const nombre = item.querySelector('input[type="text"]').value || 'Costo sin nombre';
        const monto = parseFloat(item.querySelector('input[type="number"]').value) || 0;
        costosFijos += monto;
        costosFijosDetalle.push({ nombre, monto });
      });
      
      // Obtener costos adicionales
      let costosAdicionales = 0;
      const costosAdicionalesDetalle = [];
      const costosAdicionalesItems = document.querySelectorAll('.costo-adicional-item');
      
      costosAdicionalesItems.forEach(item => {
        const nombre = item.querySelector('input[type="text"]').value || 'Costo adicional sin nombre';
        const monto = parseFloat(item.querySelector('input[type="number"]').value) || 0;
        costosAdicionales += monto;
        costosAdicionalesDetalle.push({ nombre, monto });
      });
      
      // Obtener ingresos
      let ingresoMensual = 0;
      const ingresosDetalle = [];
      const ingresosItems = document.querySelectorAll('.ingreso-item');
      
      ingresosItems.forEach(item => {
        const nombre = item.querySelector('input[type="text"]').value || 'Ingreso sin nombre';
        const monto = parseFloat(item.querySelector('input[type="number"]').value) || 0;
        ingresoMensual += monto;
        ingresosDetalle.push({ nombre, monto });
      });
      
      // Calcular costos totales
      const costosTotales = costosFijos + costosAdicionales;
      const utilidadMensual = ingresoMensual - costosTotales;
      
      // Generar contenido de resultados
      let detalleCostosFijos = '';
      costosFijosDetalle.forEach(costo => {
        detalleCostosFijos += `
          <div class="flex justify-between py-1">
            <span>${costo.nombre}</span>
            <span class="font-medium">$${costo.monto.toLocaleString()}</span>
          </div>
        `;
      });
      
      let detalleCostosAdicionales = '';
      costosAdicionalesDetalle.forEach(costo => {
        detalleCostosAdicionales += `
          <div class="flex justify-between py-1">
            <span>${costo.nombre}</span>
            <span class="font-medium">$${costo.monto.toLocaleString()}</span>
          </div>
        `;
      });
      
      let detalleIngresos = '';
      ingresosDetalle.forEach(ingreso => {
        detalleIngresos += `
          <div class="flex justify-between py-1">
            <span>${ingreso.nombre}</span>
            <span class="font-medium">$${ingreso.monto.toLocaleString()}</span>
          </div>
        `;
      });
      
      const contenidoResultados = `
        <div class="space-y-4">
          <h3 class="font-bold text-lg text-purple-700 border-b pb-2">Resumen Financiero Mensual</h3>
          
          ${detalleIngresos ? `
          <div class="bg-green-50 p-4 rounded-lg border border-green-200 shadow-sm">
            <h4 class="font-bold text-green-700 mb-2 flex items-center"><i class="fas fa-coins mr-2"></i> Detalle de Ingresos</h4>
            <div class="space-y-1">
              ${detalleIngresos}
              <div class="flex justify-between pt-2 mt-2 border-t border-green-200 font-bold">
                <span>Total Ingresos</span>
                <span>$${ingresoMensual.toLocaleString()}</span>
              </div>
            </div>
          </div>
          ` : ''}
          
          ${detalleCostosFijos ? `
          <div class="bg-red-50 p-4 rounded-lg border border-red-200 shadow-sm">
            <h4 class="font-bold text-red-700 mb-2 flex items-center"><i class="fas fa-list mr-2"></i> Detalle de Costos Fijos</h4>
            <div class="space-y-1">
              ${detalleCostosFijos}
              <div class="flex justify-between pt-2 mt-2 border-t border-red-200 font-bold">
                <span>Total Costos Fijos</span>
                <span>$${costosFijos.toLocaleString()}</span>
              </div>
            </div>
          </div>
          ` : ''}
          
          ${detalleCostosAdicionales ? `
          <div class="bg-teal-50 p-4 rounded-lg border border-teal-200 shadow-sm">
            <h4 class="font-bold text-teal-700 mb-2 flex items-center"><i class="fas fa-tools mr-2"></i> Detalle de Costos Adicionales</h4>
            <div class="space-y-1">
              ${detalleCostosAdicionales}
              <div class="flex justify-between pt-2 mt-2 border-t border-teal-200 font-bold">
                <span>Total Costos Adicionales</span>
                <span>$${costosAdicionales.toLocaleString()}</span>
              </div>
            </div>
          </div>
          ` : ''}
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-red-50 p-4 rounded-lg border border-red-200 shadow-sm">
              <p class="text-sm text-red-600 flex items-center"><i class="fas fa-receipt mr-2"></i> Costos Totales</p>
              <p class="font-bold text-red-800 text-xl">$${costosTotales.toLocaleString()}</p>
            </div>
            <div class="bg-purple-50 p-4 rounded-lg border border-purple-200 shadow-sm">
              <p class="text-sm text-purple-600 flex items-center"><i class="fas fa-piggy-bank mr-2"></i> Utilidad Estimada</p>
              <p class="font-bold text-purple-800 text-xl">$${utilidadMensual.toLocaleString()}</p>
            </div>
          </div>
          
          <div class="mt-4 bg-yellow-50 p-4 rounded-lg border border-yellow-200 shadow-sm">
            <h4 class="font-bold text-yellow-700 mb-2 flex items-center"><i class="fas fa-lightbulb mr-2"></i> Análisis</h4>
            <p class="text-yellow-800 mb-2">
              ${utilidadMensual > 0 
                ? `<span class="text-green-600 font-semibold"><i class="fas fa-check-circle mr-1"></i> ¡Excelente!</span> El negocio es rentable con $${utilidadMensual.toLocaleString()} de utilidad mensual.` 
                : `<span class="text-red-600 font-semibold"><i class="fas fa-times-circle mr-1"></i> ¡Cuidado!</span> El negocio tiene pérdidas de $${Math.abs(utilidadMensual).toLocaleString()} mensuales.`}
            </p>
          </div>
          
          <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200 shadow-sm">
            <h4 class="font-bold text-indigo-700 mb-2 flex items-center"><i class="fas fa-bullseye mr-2"></i> Proyecciones</h4>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
              <div class="text-center">
                <p class="text-indigo-600 text-sm">Trimestral</p>
                <p class="font-bold text-indigo-800">$${(utilidadMensual * 3).toLocaleString()}</p>
              </div>
              <div class="text-center">
                <p class="text-indigo-600 text-sm">Semestral</p>
                <p class="font-bold text-indigo-800">$${(utilidadMensual * 6).toLocaleString()}</p>
              </div>
              <div class="text-center">
                <p class="text-indigo-600 text-sm">Anual</p>
                <p class="font-bold text-indigo-800">$${(utilidadMensual * 12).toLocaleString()}</p>
              </div>
            </div>
          </div>
        </div>
      `;
      
      // Insertar contenido en la sección de resultados
      document.getElementById('contenido-resultados').innerHTML = contenidoResultados;
      
      // Desplazar la vista hacia la sección de resultados
      resultadosSection.scrollIntoView({ behavior: 'smooth' });
    });
  </script>
</body>
</html>